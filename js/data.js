// 8問（4軸×2）
// Aがその軸の「1」側、Bが「0」側。
// ビット順：公開(1)/秘密(0), 即(1)/様子見(0), 周り(1)/自分(0), 恋(1)/日常(0)

window.MOBBY = window.MOBBY || {};

MOBBY.questions = [
  // 軸1 公開/秘密
  { axis: 0, text: "好きな人が絡むと、投稿・写真・匂わせ・共有が増える",
    A:{t:"増える", s:"気づいたら“見せる要素”が出る"}, B:{t:"増えない", s:"恋は基本、内側で完結"} },
  { axis: 0, text: "恋の話、友達にすぐ話せる",
    A:{t:"話せる", s:"報告・相談が早い"}, B:{t:"話せない", s:"秘密にして育てがち"} },

  // 軸2 即/様子見
  { axis: 1, text: "好きなら自分から動く（誘う／連絡する／距離を詰める）",
    A:{t:"動く", s:"恋は自分で進める"}, B:{t:"待つ", s:"相手の出方を見てから"} },
  { axis: 1, text: "返信や誘い、考える前にやっちゃうことがある",
    A:{t:"ある", s:"勢いで動ける"}, B:{t:"ない", s:"まず脳内会議が始まる"} },

  // 軸3 周り/自分
  { axis: 2, text: "既読・いいね・空気・周りの視線でメンタルが揺れる",
    A:{t:"揺れる", s:"反応が気になる"}, B:{t:"揺れない", s:"自分の機嫌は自給"} },
  { axis: 2, text: "“盛れてるか／ちゃんとしてるか”をわりと気にする",
    A:{t:"気にする", s:"見え方を整えたい"}, B:{t:"気にしない", s:"心地よさ優先"} },

  // 軸4 恋/日常
  { axis: 3, text: "恋が始まると、友達や予定より恋を優先しがち",
    A:{t:"優先しがち", s:"恋の比重が一気に上がる"}, B:{t:"しない", s:"友達・生活も守る"} },
  { axis: 3, text: "二人きりの時間が最優先になりやすい",
    A:{t:"なりやすい", s:"“二人の世界”に入る"}, B:{t:"ならない", s:"距離感を保てる"} },
];

MOBBY.typeMap = {
  "0000": { name:"図書室まったりモビィ", desc:"無理しない恋が得意。派手に動かず、安心できる距離感で育てる。", tags:["秘密寄り","様子見","自分基準","日常優先"] },
  "0001": { name:"屋上ひみつ恋モビィ", desc:"好きほど静かになる。秘密で大事に育てるぶん、誤解されやすい。", tags:["秘密寄り","様子見","自分基準","恋優先"] },
  "0010": { name:"昼休みお弁当会モビィ", desc:"優しさで場を保つ。聞き役で空気を守るぶん、誤解も生まれやすい。", tags:["秘密寄り","様子見","周り基準","日常優先"] },
  "0011": { name:"ロッカー手紙モビィ", desc:"誠実で慎重。タイミング待ちすぎて、すれ違いが起きやすい。", tags:["秘密寄り","様子見","周り基準","恋優先"] },

  "0100": { name:"ネイルこだわりモビィ", desc:"自分の機嫌は自給。恋よりまず“自分の世界観”が強い。", tags:["秘密寄り","即行動","自分基準","日常優先"] },
  "0101": { name:"放課後こっそり通話モビィ", desc:"恋が最優先になりやすい。二人きりに強く、ハマると深い。", tags:["秘密寄り","即行動","自分基準","恋優先"] },
  "0110": { name:"購買前たまり場モビィ", desc:"気分が良いのが一番。ノリで動けるけど温度差も出やすい。", tags:["秘密寄り","即行動","周り基準","日常優先"] },
  "0111": { name:"放課後即レスモビィ", desc:"好きなら即行動。熱も冷めも早い“スピード恋愛”。", tags:["秘密寄り","即行動","周り基準","恋優先"] },

  "1000": { name:"ストーリー撮影班モビィ", desc:"裏方センスで“いい絵”を作る。自分は写らず完成度で勝つ。", tags:["公開寄り","様子見","自分基準","日常優先"] },
  "1001": { name:"匂わせプリクラモビィ", desc:"察して…の演出が得意。控えめに見えて勝ち筋は作ってる。", tags:["公開寄り","様子見","自分基準","恋優先"] },
  "1010": { name:"文化祭広報モビィ", desc:"みんなで盛れる空気を回す。反応がエネルギーで企画・告知が強い。", tags:["公開寄り","様子見","周り基準","日常優先"] },
  "1011": { name:"ストーリー匂わせモビィ", desc:"直接言えないけど気づいてほしい。反応で不安になりやすい。", tags:["公開寄り","様子見","周り基準","恋優先"] },

  "1100": { name:"帰り道デートモビィ", desc:"恋も友達もキラキラにしたい。距離を縮めるのが上手い。", tags:["公開寄り","即行動","自分基準","日常優先"] },
  "1101": { name:"クラスアルバム映えモビィ", desc:"ここぞでちゃんと整える。控えめなのに要所で抜け目ない。", tags:["公開寄り","即行動","自分基準","恋優先"] },
  "1110": { name:"プリクラ拡散モビィ", desc:"盛れた瞬間を共有して空気を上げる。反応が来ると最強。", tags:["公開寄り","即行動","周り基準","日常優先"] },
  "1111": { name:"カップル自撮りモビィ", desc:"恋も見せ方も全力。二人の世界を明るく演出できる発信型。", tags:["公開寄り","即行動","周り基準","恋優先"] },
};

// 公式版リンク（ここだけ差し替えればOK）
MOBBY.officialUrl = "https://www.mobby.online/16school/index.html";

// 画像パス（結果表示用）
MOBBY.imageBase = "assets/types/";
MOBBY.imageExt = ".jpg";

// assets/types の画像一覧（ファイル名はそのまま）
MOBBY.imageList = [
  "カップル自撮りモビー.jpg",
  "クラスアルバム映えモビー.jpg",
  "ストーリー匂わせモビィ.jpg",
  "ストーリー撮影班モビー.jpg",
  "ネイルこだわりモビー.jpg",
  "プリクラ拡散モビー.jpg",
  "ロッカー手紙モビー.jpg",
  "体育祭モビー.jpg",
  "制服アレンジモビー.jpg",
  "匂わせプリクラモビー.jpg",
  "図書委員モビー.jpg",
  "図書室まったりモビー.jpg",
  "学級委員モビー.jpg",
  "屋上ひみつ恋モビー.jpg",
  "屋上自由時間モビー.jpg",
  "帰り道デートモビー.jpg",
  "廊下ランウェイモビー.jpg",
  "応援団長モビィ.jpg",
  "成績掲示板モビー.jpg",
  "放課後こっそり通話モビー.jpg",
  "放課後即レスモビー.jpg",
  "教科書落書きモビー.jpg",
  "文化祭センターステージモビー.jpg",
  "文化祭広報モビー.jpg",
  "模試ランキングモビー.jpg",
  "理科室研究モビー.jpg",
  "自習室モビー.jpg",
  "舞台袖実行委員モビー.jpg",
  "裏垢拡散モビー.jpg",
  "購買前たまり場モビー.jpg",
  "部室たまり場モビー.jpg"
];

// タイプ名と画像ファイル名を対応させる（モビィ/モビーの揺れは吸収）
const normalizeMobbyName = (name)=>{
  return name
    .replace(/\.(jpg|png)$/,"")
    .replace("モビィ","モビ")
    .replace("モビー","モビ");
};
MOBBY.typeImageMap = {};
MOBBY.imageList.forEach((fileName)=>{
  const normalized = normalizeMobbyName(fileName);
  if(!MOBBY.typeImageMap[normalized]){
    MOBBY.typeImageMap[normalized] = fileName;
  }
});
Object.values(MOBBY.typeMap).forEach((t)=>{
  const normalized = normalizeMobbyName(t.name);
  if(MOBBY.typeImageMap[normalized]){
    t.image = MOBBY.typeImageMap[normalized];
  }
});
