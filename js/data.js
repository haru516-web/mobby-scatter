// 8問（4軸×2）
// Aがその軸の「1」側、Bが「0」側。
// ビット順：公開(1)/秘密(0), 即(1)/様子見(0), 周り(1)/自分(0), 恋(1)/日常(0)

window.MOBBY = window.MOBBY || {};

MOBBY.questions = [
  // 軸1 公開/秘密
  { axis: 0, text: "好きな人が絡むと、投稿・写真・匂わせ・共有が増える",
    A:{t:"増える", s:"気づいたら“見せる要素”が出る"}, B:{t:"増えない", s:"恋は基本、内側で完結"} },
  { axis: 0, text: "恋の話、友達にすぐ話せる",
    A:{t:"話せる", s:"報告・相談が早い"}, B:{t:"話せない", s:"秘密にして育てがち"} },

  // 軸2 即/様子見
  { axis: 1, text: "好きなら自分から動く（誘う／連絡する／距離を詰める）",
    A:{t:"動く", s:"恋は自分で進める"}, B:{t:"待つ", s:"相手の出方を見てから"} },
  { axis: 1, text: "返信や誘い、考える前にやっちゃうことがある",
    A:{t:"ある", s:"勢いで動ける"}, B:{t:"ない", s:"まず脳内会議が始まる"} },

  // 軸3 周り/自分
  { axis: 2, text: "既読・いいね・空気・周りの視線でメンタルが揺れる",
    A:{t:"揺れる", s:"反応が気になる"}, B:{t:"揺れない", s:"自分の機嫌は自給"} },
  { axis: 2, text: "“盛れてるか／ちゃんとしてるか”をわりと気にする",
    A:{t:"気にする", s:"見え方を整えたい"}, B:{t:"気にしない", s:"心地よさ優先"} },

  // 軸4 恋/日常
  { axis: 3, text: "恋が始まると、友達や予定より恋を優先しがち",
    A:{t:"優先しがち", s:"恋の比重が一気に上がる"}, B:{t:"しない", s:"友達・生活も守る"} },
  { axis: 3, text: "二人きりの時間が最優先になりやすい",
    A:{t:"なりやすい", s:"“二人の世界”に入る"}, B:{t:"ならない", s:"距離感を保てる"} },
];

MOBBY.typeMap = {
  "0000": { name:"図書室まったりモビィ", desc:"無理しない恋が得意。派手に動かず、安心できる距離感で育てる。", tags:["秘密寄り","様子見","自分基準","日常優先"] },
  "0001": { name:"屋上ひみつ恋モビィ", desc:"好きほど静かになる。秘密で大事に育てるぶん、誤解されやすい。", tags:["秘密寄り","様子見","自分基準","恋優先"] },
  "0010": { name:"昼休みお弁当会モビィ", desc:"優しさで場を保つ。聞き役で空気を守るぶん、誤解も生まれやすい。", tags:["秘密寄り","様子見","周り基準","日常優先"] },
  "0011": { name:"ロッカー手紙モビィ", desc:"誠実で慎重。タイミング待ちすぎて、すれ違いが起きやすい。", tags:["秘密寄り","様子見","周り基準","恋優先"] },

  "0100": { name:"ネイルこだわりモビィ", desc:"自分の機嫌は自給。恋よりまず“自分の世界観”が強い。", tags:["秘密寄り","即行動","自分基準","日常優先"] },
  "0101": { name:"放課後こっそり通話モビィ", desc:"恋が最優先になりやすい。二人きりに強く、ハマると深い。", tags:["秘密寄り","即行動","自分基準","恋優先"] },
  "0110": { name:"購買前たまり場モビィ", desc:"気分が良いのが一番。ノリで動けるけど温度差も出やすい。", tags:["秘密寄り","即行動","周り基準","日常優先"] },
  "0111": { name:"放課後即レスモビィ", desc:"好きなら即行動。熱も冷めも早い“スピード恋愛”。", tags:["秘密寄り","即行動","周り基準","恋優先"] },

  "1000": { name:"ストーリー撮影班モビィ", desc:"裏方センスで“いい絵”を作る。自分は写らず完成度で勝つ。", tags:["公開寄り","様子見","自分基準","日常優先"] },
  "1001": { name:"匂わせプリクラモビィ", desc:"察して…の演出が得意。控えめに見えて勝ち筋は作ってる。", tags:["公開寄り","様子見","自分基準","恋優先"] },
  "1010": { name:"文化祭広報モビィ", desc:"みんなで盛れる空気を回す。反応がエネルギーで企画・告知が強い。", tags:["公開寄り","様子見","周り基準","日常優先"] },
  "1011": { name:"ストーリー匂わせモビィ", desc:"直接言えないけど気づいてほしい。反応で不安になりやすい。", tags:["公開寄り","様子見","周り基準","恋優先"] },

  "1100": { name:"帰り道デートモビィ", desc:"恋も友達もキラキラにしたい。距離を縮めるのが上手い。", tags:["公開寄り","即行動","自分基準","日常優先"] },
  "1101": { name:"クラスアルバム映えモビィ", desc:"ここぞでちゃんと整える。控えめなのに要所で抜け目ない。", tags:["公開寄り","即行動","自分基準","恋優先"] },
  "1110": { name:"プリクラ拡散モビィ", desc:"盛れた瞬間を共有して空気を上げる。反応が来ると最強。", tags:["公開寄り","即行動","周り基準","日常優先"] },
  "1111": { name:"カップル自撮りモビィ", desc:"恋も見せ方も全力。二人の世界を明るく演出できる発信型。", tags:["公開寄り","即行動","周り基準","恋優先"] },
};

// =============================
// 男子版（8問＋16タイプ）
// Aがその軸の「1」側、Bが「0」側。
// ビット順：表(1)/裏(0), 即ノリ(1)/様子見(0), みんな(1)/自分(0), 結果(1)/納得(0)
// =============================

// 8問（4軸×2）
MOBBY.boysQuestions = [
  // 軸1 表/裏（前に出る/裏で支える）
  { axis: 0, text: "人前で仕切ったり、注目される役を自然に引き受けがち",
    A:{t:"引き受ける", s:"前に出るほど回る"}, B:{t:"引き受けない", s:"裏で支える方が落ち着く"} },
  { axis: 0, text: "イベント（体育祭・文化祭など）で中心にいる方がテンション上がる",
    A:{t:"上がる", s:"中心で空気を動かしたい"}, B:{t:"上がらない", s:"端や裏方がいい"} },

  // 軸2 即ノリ/様子見（勢い/段取り）
  { axis: 1, text: "思いついたら先に動く（声かける／手を出す／場を変える）",
    A:{t:"先に動く", s:"勢いで突破する"}, B:{t:"まず考える", s:"段取りが先"} },
  { axis: 1, text: "場の温度が上がると、ノリで巻き込んでいきやすい",
    A:{t:"巻き込む", s:"ノリで空気を作る"}, B:{t:"巻き込まない", s:"一定の温度で進める"} },

  // 軸3 みんな/自分（集団/個人）
  { axis: 2, text: "チームやクラスの空気が気になる。誰かが困ってると動きたくなる",
    A:{t:"気になる", s:"全体を回したい"}, B:{t:"気にならない", s:"自分のペース優先"} },
  { axis: 2, text: "一人でやるより、仲間と一緒の方が力が出る",
    A:{t:"出る", s:"仲間と伸びる"}, B:{t:"出ない", s:"一人で深くやる"} },

  // 軸4 結果/納得（数字/理解）
  { axis: 3, text: "点数・順位・勝ち負けなど“見える成果”があるほど燃える",
    A:{t:"燃える", s:"結果で証明したい"}, B:{t:"燃えない", s:"納得や理解が先"} },
  { axis: 3, text: "完成度より『ちゃんと理解できたか』が一番気になる",
    A:{t:"そこまで", s:"まずは成果が大事"}, B:{t:"すごく", s:"納得が最優先"} },
];

// 16タイプ（男子版）
MOBBY.boysTypeMap = {
  // 0=裏, 0=様子見, 0=自分, 0=納得
  "0000": { name:"理科室研究モビィ", desc:"「なんでだろう」が止まらない探究者。結果より理解と根拠を積むのが快感。", tags:["裏寄り","様子見","自分基準","納得派"] },
  // 0=裏, 0=様子見, 0=自分, 1=結果
  "0001": { name:"自習室モビィ", desc:"自分の基準でコツコツ積む。評価より“自分がやり切ったか”で結果を作る。", tags:["裏寄り","様子見","自分基準","結果派"] },
  // 0=裏, 0=様子見, 1=みんな, 0=納得
  "0010": { name:"図書委員モビィ", desc:"「いつも通り」が最強。淡々と整えて、崩れない安定を守る。", tags:["裏寄り","様子見","みんな基準","納得派"] },
  // 0=裏, 0=様子見, 1=みんな, 1=結果
  "0011": { name:"舞台袖実行委員モビィ", desc:"目立たず回す縁の下。段取りと対処で“成功”を取りにいく。", tags:["裏寄り","様子見","みんな基準","結果派"] },

  // 0=裏, 1=即ノリ, 0=自分, 0=納得
  "0100": { name:"屋上自由時間モビィ", desc:"「俺は俺」。気分と自分軸で動き、群れなくても平気。", tags:["裏寄り","即ノリ","自分基準","納得派"] },
  // 0=裏, 1=即ノリ, 0=自分, 1=結果
  "0101": { name:"模試ランキングモビィ", desc:"表は淡々、内心は勝ち筋計算。順位や結果が見えるほど集中が鋭い。", tags:["裏寄り","即ノリ","自分基準","結果派"] },
  // 0=裏, 1=即ノリ, 1=みんな, 0=納得
  "0110": { name:"部室たまり場モビィ", desc:"大勢より“いつメン”。身内ノリがハマると一気に強い安心圏。", tags:["裏寄り","即ノリ","みんな基準","納得派"] },
  // 0=裏, 1=即ノリ, 1=みんな, 1=結果
  "0111": { name:"裏アカ拡散モビィ", desc:"表に出ず空気を動かす情報通。タイミングで結果を作るタイプ。", tags:["裏寄り","即ノリ","みんな基準","結果派"] },

  // 1=表, 0=様子見, 0=自分, 0=納得
  "1000": { name:"制服アレンジモビィ", desc:"“わかる人にはわかる”個性。静かに自己演出し、世界観を守る。", tags:["表寄り","様子見","自分基準","納得派"] },
  // 1=表, 0=様子見, 0=自分, 1=結果
  "1001": { name:"成績掲示板モビィ", desc:"結果で証明するストイック。数字があるほど淡々と強くなる。", tags:["表寄り","様子見","自分基準","結果派"] },
  // 1=表, 0=様子見, 1=みんな, 0=納得
  "1010": { name:"学級委員モビィ", desc:"派手さより“ちゃんと回る”が快。摩擦を減らし、安定運用に強い。", tags:["表寄り","様子見","みんな基準","納得派"] },
  // 1=表, 0=様子見, 1=みんな, 1=結果
  "1011": { name:"応援団長モビィ", desc:"「任せろ、俺がやる」。責任を背負って前に進め、成果で信頼を積む。", tags:["表寄り","様子見","みんな基準","結果派"] },

  // 1=表, 1=即ノリ, 0=自分, 0=納得
  "1100": { name:"教科書裏落書きモビィ", desc:"外には出さないけど内側の熱量は高い。創造のノリで世界を作る。", tags:["表寄り","即ノリ","自分基準","納得派"] },
  // 1=表, 1=即ノリ, 0=自分, 1=結果
  "1101": { name:"廊下ランウェイモビィ", desc:"見られてる方が調子が出る。勝てる土俵で一発決める自己プロデュース型。", tags:["表寄り","即ノリ","自分基準","結果派"] },
  // 1=表, 1=即ノリ, 1=みんな, 0=納得
  "1110": { name:"体育祭モビィ", desc:"「本気でやろうぜ」。勝ち負けより燃え切れたかで満足する熱量型。", tags:["表寄り","即ノリ","みんな基準","納得派"] },
  // 1=表, 1=即ノリ, 1=みんな, 1=結果
  "1111": { name:"文化祭センターステージモビィ", desc:"場の空気を読んで動ける起点。盛り上げて“成功”を作るのが得意。", tags:["表寄り","即ノリ","みんな基準","結果派"] },
};

// 公式版リンク（ここだけ差し替えればOK）
MOBBY.officialUrl = "https://www.mobby.online/16school/index.html";

// 画像パス（結果表示用）
MOBBY.imageBase = "assets/types/";
MOBBY.imageExt = ".jpg";

// assets/types の画像一覧（ファイル名はそのまま）
MOBBY.imageList = [
  "カップル自撮りモビー.jpg",
  "クラスアルバム映えモビー.jpg",
  "ストーリー匂わせモビィ.jpg",
  "ストーリー撮影班モビー.jpg",
  "ネイルこだわりモビー.jpg",
  "プリクラ拡散モビー.jpg",
  "ロッカー手紙モビー.jpg",
  "体育祭モビー.jpg",
  "制服アレンジモビー.jpg",
  "匂わせプリクラモビー.jpg",
  "図書委員モビー.jpg",
  "図書室まったりモビー.jpg",
  "学級委員モビー.jpg",
  "屋上ひみつ恋モビー.jpg",
  "屋上自由時間モビー.jpg",
  "帰り道デートモビー.jpg",
  "廊下ランウェイモビー.jpg",
  "応援団長モビィ.jpg",
  "成績掲示板モビー.jpg",
  "放課後こっそり通話モビー.jpg",
  "放課後即レスモビー.jpg",
  "教科書落書きモビー.jpg",
  "文化祭センターステージモビー.jpg",
  "文化祭広報モビー.jpg",
  "模試ランキングモビー.jpg",
  "理科室研究モビー.jpg",
  "自習室モビー.jpg",
  "舞台袖実行委員モビー.jpg",
  "裏垢拡散モビー.jpg",
  "購買前たまり場モビー.jpg",
  "部室たまり場モビー.jpg"
];

// タイプ名と画像ファイル名を対応させる（モビィ/モビーの揺れは吸収）
const normalizeMobbyName = (name)=>{
  return name
    .replace(/\.(jpg|png)$/,"")
    .replace("モビィ","モビ")
    .replace("モビー","モビ");
};
MOBBY.typeImageMap = {};
MOBBY.imageList.forEach((fileName)=>{
  const normalized = normalizeMobbyName(fileName);
  if(!MOBBY.typeImageMap[normalized]){
    MOBBY.typeImageMap[normalized] = fileName;
  }
});
Object.values(MOBBY.typeMap).forEach((t)=>{
  const normalized = normalizeMobbyName(t.name);
  if(MOBBY.typeImageMap[normalized]){
    t.image = MOBBY.typeImageMap[normalized];
  }
});
Object.values(MOBBY.boysTypeMap || {}).forEach((t)=>{
  const normalized = normalizeMobbyName(t.name);
  if(MOBBY.typeImageMap[normalized]){
    t.image = MOBBY.typeImageMap[normalized];
  }
});
